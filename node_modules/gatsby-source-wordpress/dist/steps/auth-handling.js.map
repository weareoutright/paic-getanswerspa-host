{"version":3,"file":"auth-handling.js","names":["storedAuthSettings","hideAuthPluginOptions","_helpers","pluginOptions","auth","restoreAuthPluginOptions"],"sources":["../../src/steps/auth-handling.ts"],"sourcesContent":["import type { GatsbyNodeApiHelpers } from \"~/utils/gatsby-types\"\nimport type { Step } from \"./../utils/run-steps\"\nimport type { IPluginOptions } from \"~/models/gatsby-api\"\n\nlet storedAuthSettings: IPluginOptions[\"auth\"] | undefined\n\nexport const hideAuthPluginOptions: Step = async (\n  _helpers: GatsbyNodeApiHelpers,\n  pluginOptions: IPluginOptions\n): Promise<void> => {\n  // store auth settings so we can restore them later\n  storedAuthSettings = pluginOptions.auth\n\n  // remove auth from pluginOptions before we write out browser plugin options module,\n  // so we don't leak into the browser\n  delete pluginOptions.auth\n}\n\nexport const restoreAuthPluginOptions: Step = async (\n  _helpers: GatsbyNodeApiHelpers,\n  pluginOptions: IPluginOptions\n): Promise<void> => {\n  if (storedAuthSettings) {\n    // if we stored auth settings, restore them now after we've written out browser plugin options module\n    // so engines can use them\n    pluginOptions.auth = storedAuthSettings\n  }\n}\n"],"mappings":";;;;AAIA,IAAIA,kBAAsD;AAEnD,MAAMC,qBAA2B,GAAG,OACzCC,QAA8B,EAC9BC,aAA6B,KACX;EAClB;EACAH,kBAAkB,GAAGG,aAAa,CAACC,IAAI;;EAEvC;EACA;EACA,OAAOD,aAAa,CAACC,IAAI;AAC3B,CAAC;AAAA;AAEM,MAAMC,wBAA8B,GAAG,OAC5CH,QAA8B,EAC9BC,aAA6B,KACX;EAClB,IAAIH,kBAAkB,EAAE;IACtB;IACA;IACAG,aAAa,CAACC,IAAI,GAAGJ,kBAAkB;EACzC;AACF,CAAC;AAAA"}